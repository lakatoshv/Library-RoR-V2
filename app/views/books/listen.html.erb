<div id="loading" class="navbar-fixed-top"></div>
<div class="col-md-4 col-md-offset-4 back">
  <p id="notice"><%= notice %></p>
  <div class="show_h2 text-center">
    <p class="show_h2">
      <strong><%= @book.title %></strong>
    </p>
    <p class="show_h2">
      <strong><%= @book.auth %></strong>
    </p>
    <p><%= image_tag @book.image_url.url(:medium), :class => "img-thumbnail" %></p>
  </div> 
  <div class="text-center book">
  <div class="cont">
  	<textarea id="textForSpeach">Hello, this is good day. Today, we are learning the text to speach converter.</textarea>
  	<label>
  		<span>Voice</span>
  		<select id="voiceOptions"></select>
  	</label>
  	<label>
  		<span>Volume</span>
  		<input type="range" id="volumeSlider" min="0" max="1" value="0.5" step="0.1">
  	</label>
  	<label>
  		<span>rate</span>
  		<input type="range" id="rateSlider" min="0" max="1" value="0.5" step="0.1">
  	</label>
  	<label>
  		<span>Pitch</span>
  		<input type="range" id="pitchSlider" min="0" max="2" value="0.5" step="0.1">
  	</label>
  	<div class="btn btn-default" onclick="speak()">Speak</div>
  	<div class="btn btn-default" onclick="window.speechSynthesis.pause()">пауза</div>
  </div>
  <script type="text/javascript">
  	var msg = new SpeechSynthesisUtterance('Hello World');
	window.speechSynthesis.speak(msg);
  	var voiceOptions = document.getElementById("voiceOptions");
  	var volumeSlider = document.getElementById("volumeSlider");
  	var rateSlider = document.getElementById("rateSlider");
  	var pitchSlider = document.getElementById("pitchSlider");
  	var textForSpeach = document.getElementById("textForSpeach");

  	var voiceMap = [];

  	function loadVoices(){
  		var voices = speechSynthesis.getVoices();
  		for(var i = 0; i < voices.length; i++){
  			var voice = voices[i];
  			var option = document.createElement("option");
  			option.value = voice.name;
  			option.innerHTML = voice.name;
  			voiceOptions.appendChild(option);
  			voiceMap[voice.name] = voice;
  		}
  	}

  	window.speechSynthesis.onvoiceschanged = function(e){
  		loadVoices();
  	}

  	function speak(){
  		var msg = new SpeechSynthesisUtterance(textForSpeach.value);
  		msg.volume = volumeSlider.value;
  		msg.voice = voiceMap[voiceOptions.value];
  		msg.rate = rateSlider.value;
  		msg.pitch = pitchSlider.value;
  		window.speechSynthesis.speak(msg);
  	}
  </script>

    <br>
      #text = ""
      #contents = File.read("public/uploads/" + @book.name_of_file + "." + @book.rozshirennya)
      #text = contents.encode(Encoding.find('UTF-8'))
      #text = File.read("public/uploads/" + @book.name_of_file + "." + @book.rozshirennya)
      #text = ""

      #reader = PDF::Reader.new("public/uploads/igra-prestolov-kniga-i.pdf")
      #book_page = 1
      #reader.pages.each do |page| 
      #  text = page.text
      #


        <p class="text-justify"> #text </p>
        <br><p class="text-center"><b class="page-number"></b></p><br>
        #book_page += 1
      #end
      #back = t ".back"
  </div>
  <br><br>
</div>
<script type="text/javascript">
  $(".back-top").hide();
    $(function () {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 100) {
                $('.back-top').fadeIn();
            } else {
                $('.back-top').fadeOut();
            }
        });
        $('#back-top a').click(function () {
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;
        });
    });
    $(".return").click(function () {
      location = "../";
    });
</script>